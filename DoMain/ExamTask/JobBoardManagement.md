# Задание: Создание API для управления вакансиями и заявками на работу  

## Описание задачи  
Необходимо разработать веб-приложение на основе **.NET 9** с использованием **Dapper** и **PostgreSQL** для платформы управления вакансиями и заявками на работу. Работодатели смогут публиковать вакансии, а соискатели отправлять на них свои заявки. Все API-методы должны поддерживать асинхронные операции с использованием **async/await**, а ответы возвращаться в формате **ApiResponse**.  

---

## Требования  

### 1. База данных  
Создайте базу данных с таблицами, описанными ниже.  

#### **`Users` (Пользователи)**  
- `UserId` (int, PK) — уникальный идентификатор пользователя.  
- `FullName` (varchar, 150) — полное имя пользователя.  
- `Email` (varchar, 150) — электронная почта.  
- `Phone` (varchar, 20) — номер телефона.  
- `Role` (varchar, 20) — роль пользователя (**Employer** или **Applicant**).  
- `CreatedAt` (timestamp) — дата регистрации.  

#### **`Jobs` (Вакансии)**  
- `JobId` (int, PK) — уникальный идентификатор вакансии.  
- `EmployerId` (int, FK → Users.UserId) — идентификатор работодателя.  
- `Title` (varchar, 150) — название вакансии.  
- `Description` (text) — описание вакансии.  
- `Salary` (decimal) — предлагаемая зарплата.  
- `Country` (varchar, 100) — страна, в которой расположена работа.  
- `City` (varchar, 100) — город, в котором расположена работа.  
- `Status` (varchar, 20) — статус вакансии (**Open**, **Closed**).  
- `CreatedAt` (timestamp) — дата публикации.  
- `UpdatedAt` (timestamp) — дата последнего обновления.  

#### **`Applications` (Заявки на работу)**  
- `ApplicationId` (int, PK) — уникальный идентификатор заявки.  
- `JobId` (int, FK → Jobs.JobId) — идентификатор вакансии.  
- `ApplicantId` (int, FK → Users.UserId) — идентификатор соискателя.  
- `Resume` (text) — резюме или сопроводительное письмо.  
- `Status` (varchar, 20) — статус заявки (**Pending**, **Accepted**, **Rejected**).  
- `CreatedAt` (timestamp) — дата подачи заявки.  
- `UpdatedAt` (timestamp) — дата изменения статуса.  

---

## 2. Функционал API  
API должно предоставлять следующие возможности:  

### **1. Управление пользователями (`Users`)**  
- **POST** `/api/users` — Регистрация нового пользователя.  
- **GET** `/api/users` — Получение списка всех пользователей.  
- **GET** `/api/users/{id}` — Получение информации о конкретном пользователе.  
- **PUT** `/api/users/{id}` — Обновление данных пользователя.  
- **DELETE** `/api/users/{id}` — Удаление пользователя.  

---

### **2. Управление вакансиями (`Jobs`)**  
- **POST** `/api/jobs` — Публикация новой вакансии работодателем.  
- **GET** `/api/jobs` — Получение списка всех вакансий.  
- **GET** `/api/jobs/{id}` — Получение данных о конкретной вакансии.  
- **PUT** `/api/jobs/{id}` — Обновление данных о вакансии (заголовок, описание, зарплата, статус).  
- **DELETE** `/api/jobs/{id}` — Удаление вакансии.  

---

### **3. Управление заявками на работу (`Applications`)**  
- **POST** `/api/applications` — Создание новой заявки на вакансию соискателем.  
- **GET** `/api/applications/job/{jobId}` — Получение всех заявок на конкретную вакансию.  
- **GET** `/api/applications/user/{applicantId}` — Получение всех заявок конкретного пользователя.  
- **PUT** `/api/applications/{id}` — Обновление статуса заявки (**Pending**, **Accepted**, **Rejected**).  
- **DELETE** `/api/applications/{id}` — Удаление заявки пользователем.  

---

### **4. Дополнительные методы (`Queries`)**  
- **GET** `/api/jobs/average-salary` — Получение средней зарплаты по всем вакансиям.  
- **GET** `/api/applications/status/{status}` — Получение заявок с определенным статусом (**Pending**, **Accepted**, **Rejected**).  
- **GET** `/api/applications/user/{userId}/count` — Получение количества заявок, отправленных конкретным пользователем.  
- **GET** `/api/jobs/recent` — Получение 10 последних опубликованных вакансий.   
- **GET** `/api/jobs/highest-salary` — Получение вакансии с самой высокой зарплатой.  
- **GET** `/api/jobs/lowest-salary` — Получение вакансии с самой низкой зарплатой.  
- **GET** `/api/applications/job/{jobId}/latest` — Получение 5 последних заявок на конкретную вакансию.  
- **GET** `/api/jobs/count/location/{city}` — Получение количества вакансий в конкретном городе.  

---

## 3. Требования к реализации  
1. Используйте **.NET 9** для разработки API.  
2. Реализуйте взаимодействие с базой данных через **Dapper** и **Npgsql**.  
3. Обеспечьте поддержку асинхронных операций с использованием **async/await**.  
4. Все ответы API должны возвращаться в формате **ApiResponse** с поддержкой статуса и сообщений.  
5. Обработайте возможные ошибки с использованием **try-catch** для каждого метода API.  

---

1. Что такое **ORM**?  
2. **Что такое Dapper и почему его называют "микро ORM"?**  
3. **Чем отличается метод `QuerySingle` от `QuerySingleOrDefault` и `QueryFirst` в Dapper?**  
4. **Что такое анонимный тип в C# и где он может быть полезен?**  
5. Что такое **API**?  
6. **Какие HTTP-методы существуют и для чего они используются?**  
7. **Что такое Swagger и как он используется для документирования Web API?**  
8. **Что такое `ApiResponse` и как он помогает стандартизировать ответы от API?**  
9. **Что такое **Dependency Injection (DI)** и какова его роль в проекте Web API?**  
10. **Что такое асинхронное программирование в C# и какие проблемы оно решает?**   

---
